{% extends "products/base.html" %}
{% load static %}

{% block title %}–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>
    <a href="{% url 'products:product_create' %}" class="btn btn-success mb-3">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>

    <form method="get" class="row g-3 mb-4">
        <div class="col-md-4">
            <label for="category" class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
            <select name="category" id="category" class="form-select">
                <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                {% for category in categories %}
                <option value="{{ category.id }}" {% if category.id|stringformat:"s" == selected_category %}selected{% endif %}>
                    {{ category.name }}
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="col-md-3">
            <label for="price_min" class="form-label">–ú–∏–Ω. —Ü–µ–Ω–∞</label>
            <input type="number" min="0" step="0.01" name="price_min" id="price_min" class="form-control"
                   value="{{ price_min }}">
        </div>

        <div class="col-md-3">
            <label for="price_max" class="form-label">–ú–∞–∫—Å. —Ü–µ–Ω–∞</label>
            <input type="number" min="0" step="0.01" name="price_max" id="price_max" class="form-control"
                   value="{{ price_max }}">
        </div>

        <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-primary w-100">üîç –§–∏–ª—å—Ç—Ä</button>
        </div>
    </form>


    {% if products %}
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
        <tr>
            <th>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        </thead>
        <tbody>
        {% for product in products %}
        <tr>
            <td style="width: 120px;">
                {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-thumbnail"
                     style="max-height: 100px;">
                {% else %}
                <span class="text-muted">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                {% endif %}
            </td>
            <td>{{ product.name }}</td>
            <td>{{ product.category.name }}</td>
            <td>{{ product.price|floatformat:2 }} ‚ÇΩ</td>
            <td>
                <a href="{% url 'products:product_detail' product.id %}" class="btn btn-info btn-sm">üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                <a href="{% url 'products:product_edit' product.id %}" class="btn btn-primary btn-sm">‚úèÔ∏è
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'products:product_delete' product.id %}" class="btn btn-danger btn-sm">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">–¢–æ–≤–∞—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</div>
    {% endif %}
</div>
{% endblock %}

